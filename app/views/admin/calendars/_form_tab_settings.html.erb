<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
  <%# Left Column - Details %>
  <div class="space-y-6">
    <div>
      <h2 class="text-lg font-bold mb-1">Calendar Details</h2>
      <p class="text-sm text-base-content/60 mb-4">Basic information about this event source.</p>
    </div>

    <fieldset class="fieldset">
      <legend class="fieldset-legend">Partner Organiser <span class="text-error">*</span></legend>
      <%= f.input_field :partner_id,
                        as: :select,
                        collection: options_for_organiser,
                        selected: (@partner&.id || @calendar.partner_id).to_s,
                        class: 'select select-bordered w-full',
                        data: { controller: "tom-select" } %>
      <p class="fieldset-label">Which group organises these events?</p>
    </fieldset>

    <fieldset class="fieldset">
      <legend class="fieldset-legend">Calendar Name <span class="text-error">*</span></legend>
      <%= f.input_field :name, class: 'input input-bordered w-full' %>
      <p class="fieldset-label">A simple description to help remember what this calendar is</p>
    </fieldset>

    <fieldset class="fieldset">
      <legend class="fieldset-legend">Source URL <span class="text-error">*</span></legend>
      <%= f.input_field :source, class: 'input input-bordered w-full font-mono text-sm', placeholder: 'https://your-domain.com/events.ics' %>
      <p class="fieldset-label"><%= t('admin.calendars.handbook_hint_html') %></p>
    </fieldset>

    <fieldset class="fieldset">
      <legend class="fieldset-legend">Import Mode</legend>
      <%= f.input_field :importer_mode,
                        as: :select,
                        collection: options_for_importer,
                        selected: @calendar.importer_mode || 'auto',
                        class: 'select select-bordered w-full' %>
    </fieldset>

    <div class="card bg-base-200/50 border border-base-300">
      <div class="card-body p-4">
        <h3 class="font-semibold text-sm flex items-center gap-2 mb-2">
          <%= icon(:info, size: '4', css_class: 'text-base-content/60') %>
          Supported Calendar Sources
        </h3>
        <ul class="text-xs text-base-content/70 space-y-1">
          <% calendar_import_sources do |name, domains| %>
            <li class="flex items-start gap-2">
              <span class="text-placecal-orange">â€¢</span>
              <span><strong><%= name %></strong> <span class="text-base-content/50">(<%= domains.join(', ') %>)</span></span>
            </li>
          <% end %>
        </ul>
        <% if @calendar.importer_used.present? %>
          <p class="text-xs text-base-content/50 mt-3 pt-3 border-t border-base-300">
            Last imported using: <span class="font-medium"><%= @calendar.importer_used %></span>
          </p>
        <% end %>
      </div>
    </div>
  </div>

  <%# Right Column - Location & Contact %>
  <div class="space-y-6">
    <div>
      <h2 class="text-lg font-bold mb-1">Location Settings</h2>
      <p class="text-sm text-base-content/60 mb-4">How should location information be handled for events?</p>
    </div>

    <fieldset class="fieldset bg-base-200/50 border border-base-300 rounded-box p-4">
      <legend class="fieldset-legend">Default Location</legend>
      <%= f.input_field :place_id,
                        as: :select,
                        collection: options_for_location,
                        include_blank: '(No default location)',
                        class: 'select select-bordered w-full bg-base-100',
                        data: { controller: "tom-select" } %>
      <p class="fieldset-label mt-2">Used when strategy requires a fallback location</p>
    </fieldset>

    <fieldset class="fieldset">
      <legend class="fieldset-legend">Location Strategy</legend>
      <p class="text-sm text-base-content/60 mb-4">Where should location information for this calendar come from?</p>
      <%= render Admin::RadioCardGroupComponent.new(
        form: f,
        attribute: :strategy,
        values: Calendar.strategy.values,
        label_method: method(:strategy_label)
      ) %>
    </fieldset>

    <div class="divider"></div>

    <div>
      <h2 class="text-lg font-bold mb-1">Public Contact</h2>
      <p class="text-sm text-base-content/60 mb-4">
        Shown on event pages in the "Problem with this listing?" link.
      </p>
    </div>

    <div class="card bg-base-200/50 border border-base-300">
      <div class="card-body p-4 gap-4">
        <fieldset class="fieldset">
          <legend class="fieldset-legend">Contact Name</legend>
          <%= f.input_field :public_contact_name, class: 'input input-bordered input-sm w-full bg-base-100' %>
        </fieldset>

        <fieldset class="fieldset">
          <legend class="fieldset-legend">Contact Email</legend>
          <%= f.input_field :public_contact_email, class: 'input input-bordered input-sm w-full bg-base-100',
              'data-validate-email': 'true',
              'data-validate-email-message': 'Enter a valid email address' %>
        </fieldset>

        <fieldset class="fieldset">
          <legend class="fieldset-legend">Contact Phone</legend>
          <%= f.input_field :public_contact_phone, class: 'input input-bordered input-sm w-full bg-base-100' %>
        </fieldset>
      </div>
    </div>
  </div>
</div>
