<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
  <%# Left Column - Details %>
  <div class="space-y-6">
    <div>
      <h2 class="text-lg font-bold mb-1"><%= Calendar.model_name.human %> Details</h2>
      <p class="text-sm text-base-content/60 mb-4"><%= t('admin.calendars.sections.details_description') %></p>
    </div>

    <fieldset class="fieldset">
      <legend class="fieldset-legend"><%= t('admin.calendars.fields.partner_organiser') %> <span class="text-error"><%= t('admin.labels.required') %></span></legend>
      <%= f.input_field :partner_id,
                        as: :select,
                        collection: options_for_organiser,
                        selected: (@partner&.id || @calendar.partner_id).to_s,
                        class: 'select select-bordered w-full',
                        data: { controller: "tom-select" } %>
      <p class="fieldset-label"><%= t('admin.calendars.fields.partner_hint') %></p>
    </fieldset>

    <fieldset class="fieldset">
      <legend class="fieldset-legend"><%= attr_label(:calendar, :name) %> <span class="text-error"><%= t('admin.labels.required') %></span></legend>
      <%= f.input_field :name, class: 'input input-bordered w-full' %>
      <p class="fieldset-label"><%= t('admin.calendars.fields.name_hint') %></p>
    </fieldset>

    <fieldset class="fieldset">
      <legend class="fieldset-legend"><%= attr_label(:calendar, :source) %> <span class="text-error"><%= t('admin.labels.required') %></span></legend>
      <%= f.input_field :source, class: 'input input-bordered w-full font-mono text-sm', placeholder: t('admin.calendars.fields.source_placeholder') %>
      <p class="fieldset-label"><%= t('admin.calendars.handbook_hint_html') %></p>
    </fieldset>

    <fieldset class="fieldset">
      <legend class="fieldset-legend"><%= attr_label(:calendar, :import_mode) %></legend>
      <%= f.input_field :importer_mode,
                        as: :select,
                        collection: options_for_importer,
                        selected: @calendar.importer_mode || 'auto',
                        class: 'select select-bordered w-full' %>
    </fieldset>

    <div class="card bg-base-200/50 border border-base-300">
      <div class="card-body p-4">
        <h3 class="font-semibold text-sm flex items-center gap-2 mb-2">
          <%= icon(:info, size: '4', css_class: 'text-base-content/60') %>
          <%= t('admin.calendars.sections.supported_sources') %>
        </h3>
        <ul class="text-xs text-base-content/70 space-y-1">
          <% calendar_import_sources do |name, domains| %>
            <li class="flex items-start gap-2">
              <span class="text-placecal-orange">â€¢</span>
              <span><strong><%= name %></strong> <span class="text-base-content/50">(<%= domains.join(', ') %>)</span></span>
            </li>
          <% end %>
        </ul>
        <% if @calendar.importer_used.present? %>
          <p class="text-xs text-base-content/50 mt-3 pt-3 border-t border-base-300">
            <%= t('admin.calendars.sections.last_imported_using', importer: @calendar.importer_used) %>
          </p>
        <% end %>
      </div>
    </div>
  </div>

  <%# Right Column - Location & Contact %>
  <div class="space-y-6">
    <div>
      <h2 class="text-lg font-bold mb-1"><%= t('admin.sections.location_settings') %></h2>
      <p class="text-sm text-base-content/60 mb-4"><%= t('admin.calendars.sections.location_description') %></p>
    </div>

    <fieldset class="fieldset bg-base-200/50 border border-base-300 rounded-box p-4">
      <legend class="fieldset-legend"><%= t('admin.calendars.fields.default_location') %></legend>
      <%= f.input_field :place_id,
                        as: :select,
                        collection: options_for_location,
                        include_blank: t('admin.calendars.fields.default_location_blank'),
                        class: 'select select-bordered w-full bg-base-100',
                        data: { controller: "tom-select" } %>
      <p class="fieldset-label mt-2"><%= t('admin.calendars.fields.default_location_hint') %></p>
    </fieldset>

    <fieldset class="fieldset">
      <legend class="fieldset-legend"><%= attr_label(:calendar, :strategy) %></legend>
      <p class="text-sm text-base-content/60 mb-4"><%= t('admin.calendars.fields.strategy_hint') %></p>
      <%= render Admin::RadioCardGroupComponent.new(
        form: f,
        attribute: :strategy,
        values: Calendar.strategy.values,
        label_method: method(:strategy_label)
      ) %>
    </fieldset>

    <div class="divider"></div>

    <div>
      <h2 class="text-lg font-bold mb-1"><%= t('admin.sections.public_contact') %></h2>
      <p class="text-sm text-base-content/60 mb-4">
        <%= t('admin.calendars.sections.contact_description') %>
      </p>
    </div>

    <div class="card bg-base-200/50 border border-base-300">
      <div class="card-body p-4 gap-4">
        <fieldset class="fieldset">
          <legend class="fieldset-legend"><%= attr_label(:calendar, :public_contact_name) %></legend>
          <%= f.input_field :public_contact_name, class: 'input input-bordered input-sm w-full bg-base-100' %>
        </fieldset>

        <fieldset class="fieldset">
          <legend class="fieldset-legend"><%= attr_label(:calendar, :public_contact_email) %></legend>
          <%= f.input_field :public_contact_email, class: 'input input-bordered input-sm w-full bg-base-100',
              'data-validate-email': 'true',
              'data-validate-email-message': t('admin.hints.email_validation') %>
        </fieldset>

        <fieldset class="fieldset">
          <legend class="fieldset-legend"><%= attr_label(:calendar, :public_contact_phone) %></legend>
          <%= f.input_field :public_contact_phone, class: 'input input-bordered input-sm w-full bg-base-100' %>
        </fieldset>
      </div>
    </div>
  </div>
</div>
