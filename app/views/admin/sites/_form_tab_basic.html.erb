<%= render Admin::SectionHeaderComponent.new(
  title: t('admin.sections.basic_information'),
  description: t('admin.sites.sections.basic_info_description')
) %>

<div class="max-w-2xl space-y-4">
  <fieldset class="fieldset">
    <%= f.label :name, class: 'fieldset-legend' do %>
      <%= Site.model_name.human %> <%= attr_label(:site, :name) %> <span class="text-error"><%= t('admin.labels.required') %></span>
    <% end %>
    <%= f.input_field :name, class: 'input input-bordered w-full' %>
  </fieldset>

  <% if policy(@site).permitted_attributes.include? :site_admin_id %>
    <fieldset class="fieldset">
      <%= f.label :site_admin_id, t('admin.sites.fields.site_admin'), class: 'fieldset-legend' %>
      <%= f.select :site_admin_id,
            User.order(:last_name, :first_name).map { |u|
              full_name = [u.first_name, u.last_name].compact.join(' ').presence
              label = full_name ? "#{full_name} (#{u.email})" : u.email
              [label, u.id]
            },
            { include_blank: t('admin.placeholders.select_model', model: t('admin.models.admin.one').downcase) },
            { class: 'select select-bordered w-full' } %>
    </fieldset>
  <% else %>
    <%
      admin = @site.site_admin
      admin_display = if admin
        full_name = [admin.first_name, admin.last_name].compact.join(' ').presence
        full_name ? "#{full_name} (#{admin.email})" : admin.email
      else
        t('admin.labels.none')
      end
    %>
    <div class="card bg-base-200/50 border border-base-300 p-3">
      <p class="text-sm"><strong><%= t('admin.models.admin.one') %>:</strong> <%= admin_display %></p>
    </div>
  <% end %>

  <fieldset class="fieldset">
    <%= f.label :place_name, attr_label(:site, :place_name), class: 'fieldset-legend' %>
    <%= f.input_field :place_name, class: 'input input-bordered w-full' %>
    <p class="fieldset-label"><%= t('admin.sites.fields.place_name_hint') %></p>
  </fieldset>

  <fieldset class="fieldset">
    <%= f.label :tagline, attr_label(:site, :tagline), class: 'fieldset-legend' %>
    <%= f.input_field :tagline, class: 'input input-bordered w-full' %>
  </fieldset>

  <fieldset class="fieldset" data-controller="char-counter" data-char-counter-max-value="120">
    <%= f.label :hero_text, attr_label(:site, :hero_text), class: 'fieldset-legend' %>
    <%= f.input_field :hero_text, as: :text, class: 'textarea textarea-bordered w-full min-h-20', maxlength: 120, data: { controller: 'auto-expand', char_counter_target: 'input', action: 'input->char-counter#update' } %>
    <div class="flex items-center justify-between mt-1">
      <p class="fieldset-label"><%= t('admin.sites.fields.hero_text_hint') %></p>
      <span class="text-xs tabular-nums transition-colors" data-char-counter-target="counter">0 / 120</span>
    </div>
  </fieldset>

  <fieldset class="fieldset">
    <%= f.label :description, attr_label(:site, :description), class: 'fieldset-legend' %>
    <%= f.input_field :description, as: :text, class: 'textarea textarea-bordered w-full min-h-32', data: { controller: 'auto-expand' } %>
  </fieldset>
</div>
