<%= simple_form_for @partner, html: { data: { controller: 'partner-tabs live-validation' } } do |f| %>

  <% unless policy(@partner).permitted_attributes.include? :hidden %>
    <% if @partner.hidden %>
      <div role="alert" class="alert alert-error mb-6">
        <%= icon(:warning, size: '6', css_class: 'shrink-0') %>
        <div>
          <h3 class="font-bold">This partner is hidden</h3>
          <p>Your partner is currently not visible to the public for the following reason:</p>
          <div class="mt-2 p-3 bg-error/20 rounded"><%= @partner.hidden_reason_html.to_s.html_safe %></div>
          <p class="mt-2">Once you have fixed this issue, contact <a href="mailto:support@placecal.org" class="link">support@placecal.org</a> to make your partner public again.</p>
        </div>
      </div>
    <% end %>
  <% end %>

  <%# Radio Tabs - daisyUI tabs-lift %>
  <div role="tablist" class="tabs tabs-lift">
    <input type="radio" name="partner_tabs" class="tab" aria-label="ðŸ“‹ Basic Info" data-partner-tabs-target="tab" data-hash="basic" checked="checked" />
    <div class="tab-content bg-base-100 border-base-300 p-6" data-partner-tabs-target="panel" data-section="basic">
      <%= render 'form_tab_basic', f: f %>
    </div>

    <input type="radio" name="partner_tabs" class="tab" aria-label="ðŸ“ Location" data-partner-tabs-target="tab" data-hash="location" />
    <div class="tab-content bg-base-100 border-base-300 p-6" data-partner-tabs-target="panel" data-section="location">
      <%= render 'form_tab_location', f: f %>
    </div>

    <input type="radio" name="partner_tabs" class="tab" aria-label="ðŸ“ž Contact" data-partner-tabs-target="tab" data-hash="contact" />
    <div class="tab-content bg-base-100 border-base-300 p-6" data-partner-tabs-target="panel" data-section="contact">
      <%= render 'form_tab_contact', f: f %>
    </div>

    <input type="radio" name="partner_tabs" class="tab" aria-label="ðŸ·ï¸ Tags" data-partner-tabs-target="tab" data-hash="tags" />
    <div class="tab-content bg-base-100 border-base-300 p-6" data-partner-tabs-target="panel" data-section="tags">
      <%= render 'form_tab_tags', f: f %>
    </div>

    <% unless @partner.new_record? %>
      <input type="radio" name="partner_tabs" class="tab" aria-label="ðŸ“… Calendars" data-partner-tabs-target="tab" data-hash="calendars" />
      <div class="tab-content bg-base-100 border-base-300 p-6" data-partner-tabs-target="panel" data-section="calendars">
        <%= render 'form_tab_calendars' %>
      </div>

      <input type="radio" name="partner_tabs" class="tab" aria-label="ðŸ‘¥ Admins" data-partner-tabs-target="tab" data-hash="admins" />
      <div class="tab-content bg-base-100 border-base-300 p-6" data-partner-tabs-target="panel" data-section="admins">
        <%= render 'form_tab_admins' %>
      </div>

      <input type="radio" name="partner_tabs" class="tab" aria-label="ðŸ‘ï¸ Preview" data-partner-tabs-target="tab" data-hash="preview" />
      <div class="tab-content bg-base-100 border-base-300 p-6" data-partner-tabs-target="panel" data-section="preview">
        <%= render 'form_tab_preview' %>
      </div>
    <% end %>

    <%# Spacer to push Settings tab right %>
    <div class="tab flex-1 cursor-default"></div>

    <input type="radio" name="partner_tabs" class="tab" aria-label="âš™ï¸ Settings" data-partner-tabs-target="tab" data-hash="settings" />
    <div class="tab-content bg-base-100 border-base-300 p-6" data-partner-tabs-target="panel" data-section="settings">
      <%= render 'form_tab_settings', f: f %>
    </div>
  </div>

  <%= render Admin::SaveBarComponent.new(
    multi_step: true,
    tab_name: 'partner_tabs',
    settings_hash: 'settings',
    preview_hash: 'preview',
    storage_key: 'partnerTabAfterSave'
  ) %>
<% end %>

<div id="map-pin-div" data-url="<%= image_path('icons/map/map-marker.png') %>"></div>
