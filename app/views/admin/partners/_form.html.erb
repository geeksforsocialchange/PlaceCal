<%= simple_form_for @partner, html: { data: { controller: 'form-tabs live-validation', 'form-tabs-storage-key-value': 'partnerTabAfterSave' } } do |f| %>

  <% unless policy(@partner).permitted_attributes.include? :hidden %>
    <% if @partner.hidden %>
      <div role="alert" class="alert alert-error mb-6">
        <%= icon(:warning, size: '6', css_class: 'shrink-0') %>
        <div>
          <h3 class="font-bold">This partner is hidden</h3>
          <p>Your partner is currently not visible to the public for the following reason:</p>
          <div class="mt-2 p-3 bg-error/20 rounded"><%= @partner.hidden_reason_html.to_s.html_safe %></div>
          <p class="mt-2">Once you have fixed this issue, contact <a href="mailto:support@placecal.org" class="link">support@placecal.org</a> to make your partner public again.</p>
        </div>
      </div>
    <% end %>
  <% end %>

  <%= render Admin::TabFormComponent.new(
    tabs: [
      { label: 'ðŸ“‹ Basic Info', hash: 'basic', partial: 'form_tab_basic' },
      { label: 'ðŸ“ Location', hash: 'location', partial: 'form_tab_location' },
      { label: 'ðŸ“ž Contact', hash: 'contact', partial: 'form_tab_contact' },
      { label: 'ðŸ·ï¸ Tags', hash: 'tags', partial: 'form_tab_tags' },
      { label: 'ðŸ“… Calendars', hash: 'calendars', partial: 'form_tab_calendars', persisted_only: true },
      { label: 'ðŸ‘¥ Admins', hash: 'admins', partial: 'form_tab_admins', persisted_only: true },
      { label: 'ðŸ‘ï¸ Preview', hash: 'preview', partial: 'form_tab_preview', persisted_only: true },
      { label: 'âš™ï¸ Settings', hash: 'settings', partial: 'form_tab_settings', spacer_before: true }
    ],
    tab_name: 'partner_tabs',
    storage_key: 'partnerTabAfterSave',
    settings_hash: 'settings',
    preview_hash: 'preview',
    form: f,
    record: @partner
  ) %>
<% end %>
