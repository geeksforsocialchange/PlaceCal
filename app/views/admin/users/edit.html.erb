<h1 class="page-header">Edit User: <%= @user.full_name %></h1>

<div class="behavior-trigger" data-behavior="user.form"></div>

<%- disabled_fields = current_user.root? ? [] : [:first_name, :last_name, :email, :phone, :avatar] %>

<%=  filtered_form_for(@user, method: :put, url: admin_user_path(@user), disabled: disabled_fields, display_only: policy(@user).permitted_attributes_for_update) do |f| %>
  <%= render 'form', f: f %>
  <%= f.submit "Update", class: "btn btn-primary " %>
  <% if policy(@user).destroy? -%>
    <%= link_to "Destroy User", 
      admin_user_path(@user), 
      method: :delete, 
      class: "btn btn-danger", 
      data: { confirm: "Please confirm user DELETE\n\nThis is permanent" } %>
  <% end -%>
<% end %>
