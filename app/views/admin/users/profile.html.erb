<% content_for :title do %><%= t('admin.users.profile.title') %><% end %>

<div class="mb-6">
  <h1 class="text-2xl font-semibold"><%= t('admin.users.profile.title') %></h1>
  <p class="text-gray-600 mt-1"><%= current_user.email %></p>
</div>

<%= simple_form_for current_user,
    as: :user,
    method: :patch,
    url: update_profile_admin_user_path(current_user),
    html: { class: "space-y-6", data: {
      controller: 'form-tabs live-validation form-dirty',
      'form-tabs-storage-key-value': 'profileTabAfterSave',
      'form-dirty-tab-name-value': 'profile_tabs'
    } } do |f| %>

  <%= render(Admin::ErrorComponent.new(current_user)) %>

  <%# Radio Tabs - daisyUI tabs-lift %>
  <div class="tabs tabs-lift">
    <%= render Admin::TabPanelComponent.new(
      name: 'profile_tabs',
      label: "ðŸ‘¤ #{t('admin.users.profile.tabs.personal')}",
      hash: 'personal',
      controller_name: 'form-tabs',
      checked: true
    ) do %>
      <%= render 'profile_tab_personal', f: f %>
    <% end %>

    <%= render Admin::TabPanelComponent.new(
      name: 'profile_tabs',
      label: "ðŸ”‘ #{t('admin.users.profile.tabs.password')}",
      hash: 'password',
      controller_name: 'form-tabs'
    ) do %>
      <%= render 'profile_tab_password', f: f %>
    <% end %>

    <%= render Admin::TabPanelComponent.new(
      name: 'profile_tabs',
      label: "ðŸ›¡ï¸ #{t('admin.users.profile.tabs.permissions')}",
      hash: 'permissions',
      controller_name: 'form-tabs'
    ) do %>
      <%= render 'profile_tab_permissions', f: f %>
    <% end %>
  </div>

  <%= render Admin::SaveBarComponent.new(track_changes: true) do |c| %>
    <% c.with_button do %>
      <%= f.submit t('admin.users.profile.save_button'),
          class: "btn bg-placecal-orange hover:bg-orange-600 text-white border-placecal-orange btn-disabled opacity-50 cursor-not-allowed",
          disabled: true,
          data: { 'form-dirty-target': 'submit' } %>
    <% end %>
  <% end %>
<% end %>
