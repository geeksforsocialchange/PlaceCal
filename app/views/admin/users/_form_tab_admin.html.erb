<%# Admin Tab - Role and Danger Zone %>
<div class="space-y-8">
  <%# Role Selection %>
  <div class="max-w-2xl">
    <div class="card bg-base-200/50 border border-base-300">
      <div class="card-body p-5">
        <h3 class="font-semibold flex items-center gap-2 mb-2">
          <%= icon(:lock, size: '5', css_class: 'text-info') %>
          <%= attr_label(:user, :role) %>
        </h3>
        <p class="text-sm text-base-content/60 mb-4"><%= t('admin.users.fields.role_hint') %></p>
        <%= render Admin::RadioCardGroupComponent.new(
          form: f,
          attribute: :role,
          values: User.role.values,
          i18n_scope: 'admin.users.roles'
        ) %>
      </div>
    </div>
  </div>

  <%# Danger Zone %>
  <% if policy(@user).destroy? %>
    <div>
      <h3 class="text-lg font-bold flex items-center gap-2 text-error/80 mb-4">
        <%= icon(:warning, size: '5') %>
        <%= t('admin.sections.danger_zone') %>
      </h3>

      <div class="max-w-2xl">
        <% if @user.site_admin? %>
          <div class="card bg-base-200/50 border border-base-300">
            <div class="card-body p-5">
              <h4 class="font-semibold flex items-center gap-2 mb-2 text-base-content/70">
                <%= icon(:trash, size: '5') %>
                <%= t('admin.danger_zone.delete_title', model: User.model_name.human) %>
              </h4>
              <p class="text-sm text-base-content/60"><%= t('admin.users.danger_zone.site_admin_warning') %></p>
            </div>
          </div>
        <% else %>
          <%= render Admin::DangerZoneComponent.new(
            title: t('admin.danger_zone.delete_title', model: User.model_name.human),
            description: t('admin.danger_zone.delete_description', model: User.model_name.human.downcase),
            button_text: t('admin.actions.delete_model', model: User.model_name.human),
            button_path: admin_user_path(@user),
            confirm: t('admin.confirm.delete_permanent', model: User.model_name.human.downcase)
          ) %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
