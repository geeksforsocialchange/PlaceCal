<% content_for :title do %><%= title %><% end %>

<div class="mb-6">
  <h1 class="text-2xl font-semibold text-gray-900"><%= title %></h1>
</div>

<%- model_name = model.to_s.chop.humanize %>

<div class="mb-4">
  <%- if policy(model_name.constantize).create? && defined?(new_link) %>
    <%= link_to "Add New #{model_name}", new_link, data: { turbo: false },
        class: "inline-flex items-center px-4 py-2 text-sm font-medium rounded-md text-white bg-placecal-orange hover:bg-orange-600 transition-colors" %>
  <% end %>
</div>

<div class="bg-white shadow-sm rounded-lg overflow-hidden"
     data-controller="admin-table"
     data-admin-table-source-value="<%= source %>"
     data-admin-table-columns-value="<%= columns.map { |c| { data: c.to_s } }.to_json %>"
     data-admin-table-page-length-value="15">

  <div class="p-4 border-b border-gray-200">
    <div class="max-w-sm">
      <input type="search"
             class="block w-full rounded-md border-gray-300 shadow-sm focus:border-placecal-orange focus:ring-placecal-orange sm:text-sm"
             placeholder="Search..."
             data-admin-table-target="search"
             data-action="input->admin-table#search">
    </div>
  </div>

  <div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200" data-admin-table-target="table">
      <thead class="bg-gray-50">
        <tr>
          <% column_titles.each_with_index do |col_title, index| %>
            <th data-column="<%= columns[index] %>"
                data-action="click->admin-table#sort"
                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100">
              <%= col_title %>
            </th>
          <% end %>
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200" data-admin-table-target="tbody">
        <tr>
          <td colspan="<%= columns.length %>" class="px-6 py-4 text-center text-gray-500">
            <svg style="width: 1.25rem; height: 1.25rem; margin-right: 0.5rem; display: inline-block; animation: spin 1s linear infinite; color: #e87d1e;" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle style="opacity: 0.25;" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path style="opacity: 0.75;" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Loading...
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="px-4 py-3 border-t border-gray-200 sm:flex sm:items-center sm:justify-between">
    <div data-admin-table-target="info" class="text-sm text-gray-700"></div>
    <nav class="mt-3 sm:mt-0" aria-label="Table navigation">
      <ul class="inline-flex items-center -space-x-px" data-admin-table-target="pagination">
      </ul>
    </nav>
  </div>
</div>
