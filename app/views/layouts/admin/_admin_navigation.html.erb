<nav class="flex flex-col">
  <ul class="space-y-1 px-2">
    <%= admin_nav_link('Dashboard', admin_root_path, :home) %>
  </ul>

  <h6 class="px-4 mt-6 mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">
    Content types
  </h6>
  <ul class="space-y-1 px-2">
    <%= admin_nav_link('Partners', admin_partners_path, :partner) if policy(Partner).index? %>
    <%= admin_nav_link('Calendars', admin_calendars_path, :calendar) if policy(Calendar).index? %>
    <%= admin_nav_link('Users', admin_users_path, :users) if policy(User).index? %>
    <%= admin_nav_link('Sites', admin_sites_path, :site) if policy(Site).index? %>
    <%= admin_nav_link('Neighbourhoods', admin_neighbourhoods_path, :neighbourhood) if policy(Neighbourhood).index? %>
    <%= admin_nav_link('Partnerships', admin_partnerships_path, :partnership) if policy(Partnership).index? %>
  </ul>

  <h6 class="px-4 mt-6 mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">
    Get support
  </h6>
  <ul class="space-y-1 px-2">
    <%= admin_nav_link('Handbook', 'https://handbook.placecal.org/', :book) %>
    <%= admin_nav_link('Discord', 'http://discord.gfsc.studio/', :chat) %>
    <%= admin_nav_link('Report a bug', 'https://github.com/geeksforsocialchange/PlaceCal/issues/new?assignees=&labels=&template=bug_report.md', :bug) %>
    <li>
      <span class="flex items-center gap-2 px-3 py-2 text-sm text-gray-600">
        <%= icon(:mail, size: '4') %>
        support@placecal.org
      </span>
    </li>
  </ul>

  <% if policy(Article).index? || policy(Tag).index? || policy(Collection).index? || policy(Supporter).index? %>
    <h6 class="px-4 mt-6 mb-2 text-xs font-semibold text-gray-500 uppercase tracking-wider">
      In development
    </h6>
    <ul class="space-y-1 px-2">
      <%= admin_nav_link('Tags', admin_tags_path, :tag, root_only: true) if policy(Tag).index? %>
      <%= admin_nav_link('Articles', admin_articles_path, :article) if policy(Article).index? %>
      <%= admin_nav_link('Collections', admin_collections_path, :list, root_only: true) if policy(Collection).index? %>
      <%= admin_nav_link('Supporters', admin_supporters_path, :credit_card, root_only: true) if policy(Supporter).index? %>
      <%= admin_nav_link('Import status', admin_jobs_path, :cog, root_only: true) if current_user.root? %>
    </ul>
  <% end %>

  <div class="px-4 mt-8 text-xs text-gray-500 flex items-center gap-1">
    <%= icon(:code, size: '3') %>
    Build: <code class="font-mono"><%= link_to (ENV['GIT_REV'] ? ENV['GIT_REV'][0,7] : 'dev'), "https://github.com/geeksforsocialchange/PlaceCal/commit/#{ENV['GIT_REV']}", class: 'text-placecal-teal hover:underline' %></code>
  </div>
</nav>
