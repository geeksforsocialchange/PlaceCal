@import "tailwindcss";
@plugin "daisyui" {
	themes: light --default, corporate;
}

/* Source paths for content detection */
@source "../../app/datatables/**/*.rb";
@source "../javascript/**/*.js";
@source "../helpers/**/*.rb";
@source "../views/**/*.erb";

/* Safelist for dynamically generated icon sizes */
/* size-3 size-4 size-5 size-6 size-8 size-10 size-12 */

/*
 * Admin Tailwind CSS
 *
 * This stylesheet runs alongside Bootstrap during the migration period.
 * We use Tailwind's default classes - ensure they don't conflict with Bootstrap
 * by being specific about where we apply them.
 *
 * Tailwind v4 uses CSS-first configuration
 */

/* PlaceCal brand colors as CSS custom properties */
@theme {
	--color-placecal-brown: #5b4e46;
	--color-placecal-cream: #f5f1eb;
	--color-placecal-orange: #e87d1e;
	--color-placecal-teal: #00a9a5;
	--color-placecal-pink: #e91e63;
	--color-placecal-purple: #9c27b0;
}

/* Leaflet map styles - embedded from leaflet package */
@import "leaflet/dist/leaflet.css";

/* Spin animation for loading spinners */
@keyframes spin {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}

/* Auto-expanding textareas */
.field-sizing-content {
	field-sizing: content;
}

/* daisyUI tabs-lift radio input fixes */
@layer components {
	/* Radio input tabs need appearance:none and content from aria-label */
	.tabs-lift > input[type="radio"].tab {
		appearance: none;
		-webkit-appearance: none;
	}

	.tabs-lift > input[type="radio"].tab::after {
		content: attr(aria-label);
	}
}

/* Custom admin component styles using @apply */
@layer components {
	/* Admin-specific base styles */
	.feather {
		width: 16px;
		height: 16px;
		vertical-align: text-bottom;
	}

	.card-grid {
		display: grid;
		grid-template-columns: 1fr 1fr 1fr;
		grid-gap: 1rem;
	}

	/* Partner page specific styles */
	.map-marker {
		height: 300px !important;
	}

	.breadcrumb .size-patch {
		box-sizing: border-box;
		line-height: inherit;
	}
	.admin-tw-card {
		@apply bg-white rounded-lg shadow-sm border border-gray-200 p-4;
	}

	.admin-tw-section {
		@apply mb-6;
	}

	.admin-tw-heading {
		@apply text-xl font-semibold text-gray-900 mb-4;
	}

	.admin-tw-btn-primary {
		@apply inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm;
		@apply text-white bg-placecal-orange;
		@apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500;
	}

	.admin-tw-btn-primary:hover {
		@apply bg-orange-600;
	}

	.admin-tw-btn-secondary {
		@apply inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm;
		@apply text-gray-700 bg-white border border-gray-300;
		@apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-placecal-teal;
	}

	.admin-tw-btn-secondary:hover {
		@apply bg-gray-50;
	}
}

/* Tom Select custom theme - PlaceCal orange
   Note: NOT in @layer to ensure these override the default tom-select.css */

/* Prevent tab-content overflow from clipping dropdowns */
.tab-content:has(.ts-wrapper) {
	overflow: visible !important;
}

/* Reset any daisyUI select styles that may conflict */
.ts-wrapper.select,
.ts-wrapper.select-bordered {
	background-image: none !important;
	border: none !important;
	padding: 0 !important;
	min-height: auto !important;
	height: auto !important;
}

/* Main wrapper */
.ts-wrapper {
	min-height: 2.5rem;
}

/* Control input area */
.ts-wrapper .ts-control {
	border: 1px solid oklch(var(--bc) / 0.2) !important;
	background-color: oklch(var(--b1)) !important;
	border-radius: 0.5rem !important;
	padding: 0.5rem 0.75rem !important;
	box-shadow: none !important;
}

.ts-wrapper .ts-control:hover {
	border-color: oklch(var(--bc) / 0.3) !important;
}

.ts-wrapper.focus .ts-control {
	border-color: var(--color-placecal-orange) !important;
	outline: 2px solid oklch(from var(--color-placecal-orange) l c h / 0.2) !important;
	outline-offset: 0 !important;
	box-shadow: none !important;
}

/* Selected items (tags) */
.ts-wrapper.multi .ts-control > div,
.ts-wrapper.multi .ts-control [data-value] {
	background: var(--color-placecal-orange) !important;
	background-image: none !important;
	color: white !important;
	border: 0 !important;
	border-radius: 0.375rem !important;
	padding: 0.25rem 0.625rem !important;
	font-size: 0.875rem !important;
	font-weight: 500 !important;
	text-shadow: none !important;
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) !important;
	margin: 2px 4px 2px 0 !important;
}

.ts-wrapper.multi .ts-control > div.active,
.ts-wrapper.multi .ts-control [data-value].active {
	background: #ea580c !important;
	background-image: none !important;
}

/* Remove button on tags */
.ts-wrapper.plugin-remove_button:not(.rtl) .item .remove {
	border-left: 1px solid rgba(255, 255, 255, 0.3) !important;
	margin-left: 0.5rem !important;
	padding: 0 0.375rem !important;
	color: rgba(255, 255, 255, 0.8) !important;
}

.ts-wrapper.plugin-remove_button:not(.rtl) .item .remove:hover {
	color: white !important;
	background: #c2410c !important;
}

.ts-wrapper.plugin-remove_button.rtl .item .remove {
	border-right: 1px solid rgba(255, 255, 255, 0.3) !important;
	margin-right: 0.5rem !important;
	padding: 0 0.375rem !important;
	color: rgba(255, 255, 255, 0.8) !important;
}

/* Dropdown - ensure it shows when active */
.ts-wrapper.dropdown-active .ts-dropdown {
	display: block !important;
	visibility: visible !important;
}

.ts-dropdown {
	background: oklch(var(--b1)) !important;
	border: 1px solid oklch(var(--bc) / 0.2) !important;
	border-radius: 0.5rem !important;
	box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
		0 4px 6px -4px rgba(0, 0, 0, 0.1) !important;
	margin-top: 0.25rem !important;
	overflow: visible !important;
	z-index: 1000 !important;
}

.ts-dropdown .option {
	display: block !important;
	visibility: visible !important;
	opacity: 1 !important;
	padding: 0.5rem 0.75rem !important;
	font-size: 0.875rem !important;
	cursor: pointer !important;
}

.ts-dropdown .option:hover,
.ts-dropdown .active {
	background-color: oklch(
		from var(--color-placecal-orange) l c h / 0.1
	) !important;
	color: var(--color-placecal-orange) !important;
}

.ts-dropdown .option.selected {
	background: var(--color-placecal-orange) !important;
	color: white !important;
}

/* Dropdown content scroll */
.ts-dropdown-content {
	max-height: 15rem !important;
	overflow-y: auto !important;
	overflow-x: hidden !important;
}

/* Single select caret */
.ts-wrapper.single .ts-control:after {
	border-top-color: oklch(var(--bc) / 0.5) !important;
}

.ts-wrapper.single.dropdown-active .ts-control:after {
	border-bottom-color: oklch(var(--bc) / 0.5) !important;
}

/* Input inside control */
.ts-control > input {
	color: oklch(var(--bc)) !important;
}

/* Disabled state */
.ts-wrapper.disabled .ts-control {
	background-color: oklch(var(--b2)) !important;
	opacity: 0.6 !important;
	cursor: not-allowed !important;
}

.ts-wrapper.multi.disabled .ts-control [data-value] {
	background: oklch(var(--b3)) !important;
	color: oklch(var(--bc) / 0.7) !important;
}

/* Custom orange checkboxes for PlaceCal theme */
.checkbox-warning:checked,
.checkbox-warning[checked="checked"],
.checkbox-warning:indeterminate {
	--chkbg: var(--color-placecal-orange) !important;
	border-color: var(--color-placecal-orange) !important;
}

.checkbox-warning {
	border-color: var(--color-placecal-orange) !important;
}
